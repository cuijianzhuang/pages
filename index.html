<html class="HomePage">
  <head>
    <meta charset="utf-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1, user-scalable=no"><title>CJZ's Home</title>
    <!-- ä½¿ç”¨ç‹¬ç«‹çš„ä¸»é¢˜ç®¡ç†ç³»ç»Ÿ -->
    <script src="./js/theme-storage.js"></script>
    <script src="./js/theme-loader.js"></script>
    <!-- æ·»åŠ å†…è”æ ·å¼ï¼Œé˜²æ­¢åŠ è½½é—ªçƒ -->
    <style>
      #app {
        background-color: transparent !important;
        backdrop-filter: none !important;
        -webkit-backdrop-filter: none !important;
        box-shadow: none !important;
        border: none !important;
      }
      
      /* é¡µé¢åŠ è½½æ—¶çš„èœå•å’Œå¼•ç”¨åŒºåŸŸæ ·å¼ */
      .menu .link {
        background-color: transparent !important;
        border: none !important;
        text-shadow: 0 2px 4px rgba(0, 0, 0, 0.9);
      }
      
      .quote-section {
        background-color: transparent !important;
        border: none !important;
      }
    </style>
    <link rel="stylesheet" href="./css/index.css">
    <link rel="stylesheet" href="./css/datetime-compact.css">
    <link rel="stylesheet" href="./css/font-awesome.min.css">
    <link rel="stylesheet" href="./css/player.css">
    <link rel="stylesheet" href="./css/stars.css">
    <link rel="stylesheet" href="./css/snow.css">
    <!-- Add Sakana Widget CSS -->
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/sakana-widget@2.7.0/lib/sakana.min.css">
  </head>
  <body>
    <canvas id="particles"></canvas>
    <!-- Add Sakana Widget container -->
    <div id="sakana-widget" style="position: fixed; right: 0; bottom: 0; z-index: 100;"></div>
    <div id="app">
      <h2 class="title title-typing">å´”å¥å£®</h2>
<!--  <p class="description">æƒ³è®©æ‰€æœ‰äººè®¤è¯†æˆ‘ï¼Œå´ä¸çŸ¥é“æˆ‘æ˜¯è°</p>-->
      <div class="fade-in-text delay-2">
        <p class="description letter-animation">
          <span>C</span><span>a</span><span>r</span><span>p</span><span>e</span><span>&nbsp;</span><span>d</span><span>i</span><span>e</span><span>m</span><span>,</span><span>&nbsp;</span><span>Q</span><span>u</span><span>a</span><span>m</span><span>&nbsp;</span><span>m</span><span>i</span><span>n</span><span>i</span><span>m</span><span>u</span><span>m</span><span>&nbsp;</span><span>c</span><span>r</span><span>e</span><span>d</span><span>u</span><span>l</span><span>a</span><span>&nbsp;</span><span>p</span><span>o</span><span>s</span><span>t</span><span>e</span><span>r</span><span>o</span><span>.</span>
        </p>
      </div>
<!--   æ·»åŠ ä¸€è¨€api-->
      <div class="hitokoto fade-in-text delay-3">
        <span id="hitokoto-text">è·å–ä¸­...</span>
        <div id="hitokoto-from"></div>
      </div>
      
      <div class="datetime-container fade-in-text delay-4">
        <div class="datetime-display">
          <div class="current-time">
            <span id="current-time-text">00:00:00</span>
          </div>
          <div class="current-date">
            <span id="current-date-text">2024å¹´1æœˆ1æ—¥</span>
            <span class="weekday" id="current-weekday">æ˜ŸæœŸä¸€</span>
          </div>
          <div class="lunar-date">
            <span id="lunar-date-text">ç”²è¾°é¾™å¹´ æ­£æœˆåˆä¸€</span>
          </div>
        </div>
      </div>
      <div class="menu fade-in-text delay-5">
        <a href="https://blog.cuijianzhuang.com/" title="Blog" class="link" target="_blank">Blog</a>
<!--        <a href="https://pan.cuijianzhuang.com/" title="ç½‘ç›˜" class="link" target="_blank">Alist Drive</a>-->
        <a href="https://panel.cuijianzhuang.com/" title="1panel" class="link" target="_blank">1Panel</a>
        <a href="https://mail.cuijianzhuang.com/" title="Cloudflare ä¸´æ—¶é‚®ä»¶" class="link" target="_blank">é‚®ç®±</a>
<!--        <a href="https://state.cuijianzhuang.com/" title="å“ªå’ç›‘æ§" class="link" target="_blank">æ¢é’ˆ</a>-->
        <a href="https://server.cuijianzhuang.com/" title="UptimeFlare" class="link" target="_blank">æœåŠ¡</a>

      </div>
      <div class="menu-icons fade-in-text delay-6">
        <div class="settings-toggle">
          <i aria-hidden="true" class="fa fa-2x fa-cog"></i>
        </div>
        <div class="theme-toggle">
          <i aria-hidden="true" class="fa fa-2x fa-moon-o"></i>
        </div>
        <div class="snow-toggle">
          <i aria-hidden="true" class="fa fa-2x fa-snowflake-o"></i>
        </div>
        <a href="https://github.com/cuijianzhuang" target="_blank">
          <i aria-hidden="true" class="fa fa-2x fa-github"></i>
        </a>
      </div>
      
      <div class="quote-section fade-in-text delay-7">
        <span class="heart-icon">â¤ï¸</span> 
        <span class="quote-text">æœ‰è¶£çš„äººç»ˆå°†ç›¸é‡</span> 
        <span class="heart-icon">â¤ï¸</span>
      </div>
      
      <p class="footer fade-in-text delay-8">
        Copyright Â© 2024-<span id="currentYear"></span>
        <span class="footer-divider">Â·</span>
        <a href="about.html" class="about-link">About</a>
      </p>
    </div>

    <!-- Settings Panel -->
    <div class="settings-panel">
      <div class="settings-header">
        <h3>è®¾ç½®</h3>
        <i class="fa fa-times close-settings"></i>
      </div>
      <div class="settings-content">
        <div class="setting-item">
          <span>ç‚¹å‡»ç‰¹æ•ˆ</span>
          <label class="switch">
            <input type="checkbox" id="click-effects-toggle" checked>
            <span class="slider round"></span>
          </label>
        </div>
        <div class="setting-item">
          <span>é¼ æ ‡è½¨è¿¹</span>
          <label class="switch">
            <input type="checkbox" id="mouse-trail-toggle">
            <span class="slider round"></span>
          </label>
        </div>
        <!-- Add Sakana Widget toggle -->
        <div class="setting-item">
          <span>çœ‹æ¿å¨˜</span>
          <label class="switch">
            <input type="checkbox" id="sakana-widget-toggle" checked>
            <span class="slider round"></span>
          </label>
        </div>
        <div class="setting-item">
          <span>å¿…åº”å£çº¸</span>
          <label class="switch">
            <input type="checkbox" id="bing-wallpaper-toggle" checked>
            <span class="slider round"></span>
          </label>
        </div>
      </div>
    </div>

    <!-- https://github.com/metowolf/MetingJS -->
    <!-- require APlayer -->
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/aplayer/dist/APlayer.min.css">
    <script src="https://cdn.jsdelivr.net/npm/aplayer/dist/APlayer.min.js"></script>
    <!-- require MetingJS -->
    <script src="https://cdn.jsdelivr.net/npm/meting@2/dist/Meting.min.js"></script>
    <!--æœ¬åœ°jså¼•å…¥-->
    <script src="./js/config.js"></script>
    <script src="./js/api-manager.js"></script>
    <script src="./js/lunar-calendar.js"></script>
    <script src="./js/particles.js" defer></script>
    <script src="./js/main.js" defer></script>
    <script src="./js/stars.js" defer></script>
    <script src="./js/snow.js" defer></script>
    <script src="./js/settings.js" defer></script>
    <meting-js server="netease"
               type="playlist"
               id="961896580"
               fixed="true"
               mini="true"
               autoplay="true"
               order="random"
               volume="0.2"
               mutex="true"
               storage-name	="metingjs"
    >
    </meting-js>
    <!-- ç®€åŒ–çš„åˆå§‹åŒ–è„šæœ¬ -->
    <script>
      document.addEventListener('DOMContentLoaded', () => {
        // åŸºç¡€æ•ˆæœåˆå§‹åŒ–
        new SnowEffect();
        window.starEffect = new StarEffect();
        
        // åˆå§‹åŒ–æ—¥æœŸæ—¶é—´æ˜¾ç¤º
        window.dateTimeDisplay = new DateTimeDisplay();
        
        // å…¶ä»–åŠŸèƒ½ç”±ç‹¬ç«‹æ¨¡å—å¤„ç†
        // Settingsç±»å°†åœ¨å…¶è‡ªå·±çš„æ–‡ä»¶ä¸­è‡ªåŠ¨åˆå§‹åŒ–
      });
    </script>

    <script>
        function initSakanaWidget() {
            // ä»cookieä¸­è¯»å–çŠ¶æ€
            const cookies = document.cookie.split(';');
            const sakanaWidget = cookies.find(cookie => cookie.trim().startsWith('sakanaWidget='));
            const enabled = sakanaWidget ? sakanaWidget.split('=')[1].trim() === 'true' : true;

            if (!enabled) {
                document.getElementById('sakana-widget').style.display = 'none';
                return;
            }
            
            const sakana = new SakanaWidget(sakanaConfig.rightWidget).mount('#sakana-widget');
        }
    </script>
    <script
        async
        onload="initSakanaWidget()"
        src="https://cdn.jsdelivr.net/npm/sakana-widget@2.7.0/lib/sakana.min.js"
    ></script>
    
    <!-- ä¿®å¤è„šæœ¬ - è§£å†³theme-debug.jså’Œé¢„åŠ è½½undefinedé—®é¢˜ -->
    <script>
      (function() {
        console.log('ğŸ”§ æ‰§è¡Œå¿«é€Ÿä¿®å¤...');
        
        // ä¿®å¤1: ç§»é™¤theme-debug.jså·²åœ¨HTMLä¸­å¤„ç†
        
        // ä¿®å¤2: ä¿®å¤é¢„åŠ è½½å£çº¸çš„undefinedé—®é¢˜
        setTimeout(() => {
          if (window.wallpaperManager) {
            const originalPreload = window.wallpaperManager.preloadNextWallpaper;
            
            window.wallpaperManager.preloadNextWallpaper = async function() {
              if (!this.preloadEnabled) return;
              
              console.log('ğŸ”® å¼€å§‹é¢„åŠ è½½ä¸‹ä¸€å¼ å£çº¸ï¼ˆä¿®å¤ç‰ˆæœ¬ï¼‰...');
              try {
                // å®‰å…¨è·å–é…ç½®
                const endpoints = CONFIG?.BING_WALLPAPER?.FALLBACK_ENDPOINTS || [];
                const mainEndpoint = CONFIG?.BING_WALLPAPER?.ENDPOINT;
                
                let preloadUrl;
                if (endpoints.length > 0) {
                  preloadUrl = endpoints[0] + '&t=' + (Date.now() + 1000);
                } else if (mainEndpoint) {
                  preloadUrl = mainEndpoint + '?t=' + (Date.now() + 1000);
                } else {
                  preloadUrl = 'https://bing.img.run/rand.php?t=' + (Date.now() + 1000);
                }
                
                // éªŒè¯URL
                if (!preloadUrl || preloadUrl.includes('undefined')) {
                  console.error('âŒ é¢„åŠ è½½URLæ— æ•ˆï¼Œè·³è¿‡');
                  return;
                }
                
                await window.apiManager.requestImageFast(preloadUrl);
                console.log('âœ… é¢„åŠ è½½å®Œæˆï¼ˆä¿®å¤ç‰ˆæœ¬ï¼‰');
              } catch (error) {
                console.log('âš ï¸ é¢„åŠ è½½å¤±è´¥ï¼ˆå·²ä¿®å¤ï¼‰:', error.message);
              }
            };
            
            console.log('âœ… é¢„åŠ è½½å‡½æ•°å·²ä¿®å¤');
          }
        }, 1000);
        
        console.log('âœ… å¿«é€Ÿä¿®å¤å®Œæˆ');
      })();
    </script>
  </body>
</html>
